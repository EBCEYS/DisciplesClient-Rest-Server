# REST-сервер для клиента игры disciples 2
## Описание конфигурационного файла
```json
{
  "AllowedHosts": "*", // список адресов с которых можем получать запросы
  "ConnectionStrings": { //строки для коннекта с базой данных
    "UsersDBConnection": "Host=localhost;Port=5433;Database=Disciples2ClientDB;Username=postgres;Password=123" //пока используется только эта
  },
  "JwtAuth": { // настройки для токена
    "Issuer": "THE_EBCEY",
    "Audience": "THE_EBCEY"
  },
  "RemoveQueueFilePath": "removequeue.json" // имя файла, в котором будет хранится очередь запросов на удаление файла мода
}
```
## Планы
1. Создать удобный клиент :) будет лежать в отдельной дириктории наверное;
2. Выложить серверную часть на какой-нибудь хостинг.

## Описание работы
БД - PostgreSQL. Связь с ней идет через entity framework. Legacy datetime-ы.
### Пользователи
Токен с бесконечным жизненным циклом (может потом поменяю), но по идее, обычным пользователям не нужно будет логиниться.
На текущий момент доступны следующие запросы:
1. user/isauthorized - проверка токена - доступен всем;
2. user/login - логинимся - доступен всем (логично);
3. user/create - создание нового пользователя - доступен админу;
4. user/by-id - получение информации о пользователе по id - доступен админу;
5. user/by-id - удаление пользователя по id - доступен админу.

### Моды
На текущий момент доступны следующие запросы:
1. mods-list - возвращает информацию о модах (имя мода, версия, имя автора) - доступен всем;
2. mod/upload - загружает мод на сервер - доступен админам и авторам;
3. mod/download - загружает последнюю версию мода на клиент - доступен всем;
4. mod/remove - удаляет файл мода (если указана последний файл мода, то удаляет информацию о моде из базы (возможно потом сделаю так, чтобы только полная очистка файлов мода удаляла запись из бд)) - доступен админу.